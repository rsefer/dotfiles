#!/bin/sh
#
# convert pdf to appear as if it was scanned
#
# adapted from https://gist.github.com/andyrbell/25c8632e15d17c83a54602f6acde2724


OUT=$(basename "$1" .pdf)
magick \
	-density 130 \ # must be before input file
	"$1" \
	-rotate "$([ $((RANDOM % 2)) -eq 1 ] && echo -)0.$(($RANDOM % 4 + 5))" \
	-attenuate 0.2 +noise Multiplicative \
	-sharpen 0x1.0 \
	-colorspace Gray \
	-monitor \
	"$OUT"_scanned.pdf
