#!/bin/bash
#
# Split CSV ($1) into ($2) lines, including headers
FILENAME=$1

if [ ! -z "$2" ]; then
  LINES="$2"
else
  LINES=1000
fi

HDR=$(head -1 "$FILENAME")
split -l $LINES "$FILENAME" xyz
n=1
for f in xyz*; do
	if [ "$n" != 1 ]; then
		echo $HDR > Part${n}.csv
	fi
	cat $f >> Part${n}.csv
	rm $f
	((n++))
done
